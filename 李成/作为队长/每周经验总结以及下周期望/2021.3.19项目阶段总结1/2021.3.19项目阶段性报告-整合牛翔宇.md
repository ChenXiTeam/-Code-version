# 2021.3.19项目阶段性报告
## 一、提要

经过初步讨论，小组成员确定了各自的分工，每个人负责一到两个模块，具体分工请参考：
[项目初期规划-ChenXiTeam](https://blog.csdn.net/m0_46817064/article/details/114707478?spm=1001.2014.3001.5501)
当前各模块负责人（点击人名可跳转至CSDN个人主页）：
代码提取——[王帅](https://blog.csdn.net/Mr__666)
文本提取——[牛翔宇](https://blog.csdn.net/jas0nxy?spm=1010.2135.3001.5421)
代码检测——[吴玮桓](https://blog.csdn.net/qq_43958699)
代码与文本查重——[李成](https://blog.csdn.net/qq_43533083)
本文简单记录2021.3.12——2021.3.19一周内各成员工作内容总结和对下一周工作内容的展望。具体内容请查看个人总结文章：
[2021.3.19项目阶段报告-王帅](https://blog.csdn.net/Mr__666/article/details/115013939)
[2021.3.19项目阶段报告-牛翔宇](https://blog.csdn.net/jas0nxy/article/details/114998942)
[2021.3.19项目阶段报告-吴玮桓](https://blog.csdn.net/qq_43958699/article/details/115003375?spm=1001.2014.3001.5501)
[2021.3.19项目阶段报告-李成](https://blog.csdn.net/qq_43533083/article/details/115012598?spm=1001.2014.3001.5501)

---

## 二、本周总结
### 1. 代码提取
1）整体思路
处理选中的文件，输出识别后的文本文件，手动选择方式和指定路径；
前后端分离，分别实现，便于调试；
后续继续设计如何对输出的文本进行分类和有效提取。
2）pyqt前端设计
包含的主要功能有选择代码语言，选择输入文件和输出路径；使用python语言完成对pyqt的调用，其他的具体功能用java实现，python调用jar包执行其功能。后期会继续完善，会有修改。
3）tika试用
使用tika提供的ui试用了它的文件提取功能，但是还未能与pyqt的前端相连接；目前的思路是导入jar包，前端调用，但是总觉得这样好像没有完全实现前后端的分离；下周会照这个思路做，但是如果有更好地解决方案，可以替代之。
4）OCR试用
同tika一样，没有与前端连接，只是尝试了它的提取功能。

### 2. 文本提取
1）完成了Apache Tika GUI应用：tika app的安装与测试使用。
使用tika app完成了对PDF、doc等格式的文件的读取，包括元数据、格式化文本等信息。
2）通过Tika提供的库+python+Java实现了一个能读取文档元数据和正文内容的程序。
其中利用PyQt5的工具Qt Designer+PyUIC实现了GUI的初步设计，并使用Java+Tika实现了读取文件的类和方法并通过python调用jar包的方式实现了前后端的连接。

具体工作内容及有关代码请参考：
[Apache Tika GUI：tika-app安装及使用体验](https://blog.csdn.net/jas0nxy/article/details/114850488)
[使用PyQt5+Java+Apache Tika实现简单的文档内容提取程序](https://blog.csdn.net/jas0nxy/article/details/114963228)


### 3. 代码检测
1）了解sonarqube

1. 通过之前的试用已经知道这个代码的管理平台可以说是建立在编译器之上的，对于一些编译器会提示的错误他就不会再提示了，并且我查找了一下他对于各个编程语言的bug库。
2. 发现sonarqube是有web的api接口的。并根据需求先是只调用了bug方面的信息
url：http://localhost:9000/api/issues/search?componentKeys=vue-classroom&types=BUG

2）前端框架的设计

对于大学生的实验管理平台来说，不是所有的代码质量的指标都是需要看到的，最为主要显示的就是一些代码上的错误描述，用pyqt和QT designer简单做个一个框架。

3）后端的简单试用

简单尝试了一下如何用python调用jar包并令其运行。其中遇到了个路径的小问题，就是类名前还要加包名，否则会报错找不到这个类。

### 4. 代码与文本查重

1）学习了关于pycharm，以及pyqt5的使用并且做出了属于自己的界面，通过pyqt5做界面方面比较简单。只需要有个样子就可以了，重要的是测试代码能不能正确运行。

2）通过python的jpype库实现了java和python的对接。具体过程在另一篇博客中有展示。

3）进行了文本相似度算法的学习，包括：

- cosine

- 稀疏矩阵

- simhash

- TF-IDF 

4）尝试了以上几种算法

- 首先是cosine，主要思路是先统计文章中的关键词出现的次数，然后通过计算余弦相似度来对两个文章进行相似度比较。存在缺陷，应该使用TF-IDF算法对词进行加权计算，这样既可以排除两篇文章长度不一，词总数所带来的差异，并且更加的科学。**不过这只是第一个版本。**

- 第二个是采用稀疏矩阵进行相似度比较，采用了TF-IDF的算法，使得统计的结果更加科学化，但是也存在一定的缺陷，引文直接调用TF-IDF库，针对实验报告的查重存在一定的偏差，应该使用很多的实验报告训练自己的TF-IDF加权值，这样才更具有针对性。

- 使用simhash来进行文本相似度的比较。不足之处，没有使用TF-IDF算法。

总结：计算出来的结果有些偏差，主要是因为有的代码使用了TF-IDF算法，而有一些没有使用。


---

## 三、下周计划
### 1. 代码提取
1）完善逻辑
具体的输入输出还需斟酌，我负责的功能是一个方面，重在与队友配合；对前端界面调用后端的方式进行优化。
2）实现对tika和OCR的调用
目前前后端还不能正确地完成配合满足需求，目标是对tika和OCR的调用可以全部在前端准确完成。
3）能够选中和输出文件
在实现调用的基础上，要能够将指定的文件经过相应的处理后输出到指定路径，便于队友对其进行后续的处理；目前的思路是输出txt文件，以后再对其进行处理，分离出代码和文本并分别存储。


### 2. 文本提取
1）对提取到的文档正文内容做简单处理，通过与做其他功能模块的队友进行沟通来确定将文本处理为何种格式。
2）如有时间，尝试学习使用python实现TF-IDF算法与余弦相似度等有关查重的方法。


### 3. 代码检测
1）继续学习和了解sonarqube的更多的使用方法。
2）学习更复杂一些的java如何通过python进行调用，到时调试可能会不好处理。
3）优化pyqt的前端设计。


### 4. 代码与文本查重
1）实现真正的自己的TF-IDF，因为使用别人库里的总会有一些偏差，不如自己训练出来的更加符合实验报告的需求，计算的结果更加准确。
2）另一方面就是代码相似度的判断，打算先开个头。
3）还有界面的设计再完善一些。
